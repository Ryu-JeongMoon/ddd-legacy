# 키친포스

## 퀵 스타트

```sh
cd docker
docker compose -p kitchenpos up -d
```

## 요구 사항

- **상품**
    - [ ] 상품은 전체 프로젝트에서 추적 가능한 `유일한 식별자`를 지녀야 한다.
        - [ ] 분산 환경에서 `식별자 생성의 경합이 가능한 발생하지 않도록 해야 한다.`
    - [ ] `이름`과 `가격`이 있다.
    - [ ] 상품을 등록할 수 있다.
      - [ ] 상품의 가격은 0원 이상이어야 한다.
      - [ ] 상품의 가격은 일정 수준의 오차도 허용해서는 안 된다.
    - [ ] 등록된 상품들을 조회할 수 있다.
        - [ ] 존재하지 않는 식별자로 조회 시 예외 처리한다.
    - [ ] 이름을 변경할 수 있다.
        - [ ] 이름은 빈 값이 될 수 없다.
        - [ ] 이름에 비속어를 사용할 수 없다.
            - [ ] 비속어 검증은 무료 비속어 필터링 사이트인 `purgomalum.com`을 이용한다.
            - [ ] HTTP API 호출을 사용해 검증한다.
    - [ ] 가격을 변경할 수 있다.
        - [ ] 가격은 빈 값이 될 수 없으며 `0원 이상`이어야 한다.
        - [ ] 메뉴 가격이 해당 상품 가격의 합보다 크면 메뉴를 진열하지 않는다.
        - [ ] 가격이 변경될 시 전체 메뉴의 가격을 다시 계산한다.


- **메뉴**
    - [ ] 메뉴는 전체 프로젝트에서 추적 가능한 `유일한 식별자`를 지녀야 한다.
        - [ ] 분산 환경에서 `식별자 생성의 경합이 가능한 발생하지 않도록 해야 한다.`
    - [ ] `이름`, `가격`, `메뉴 그룹`, `진열 여부`, `1개 이상의 상품`이 있다.
    - [ ] 포함된 상품에는 수량이 있다.
    - [ ] 메뉴를 등록할 수 있다.
        - [ ] 이름은 빈 값이 될 수 없다.
        - [ ] 이름에 비속어를 사용할 수 없다.
            - [ ] 비속어 검증은 무료 비속어 필터링 사이트인 `purgomalum.com`을 이용한다.
            - [ ] HTTP API 호출을 사용해 검증한다.
        - [ ] 가격은 빈 값이 될 수 없으며 `0원 이상`이어야 한다.
        - [ ] 가격이 검증 조건에 맞지 않다면 예외 처리한다.
        - [ ] 메뉴 그룹이 존재하지 않는다면 예외 처리한다.
        - [ ] 메뉴에 상품을 넣지 않는다면 예외 처리한다.
        - [ ] 메뉴에 포함된 상품들이 모두 등록되어 있지 않다면 예외 처리한다.
        - [ ] 메뉴에 포함된 상품들의 가격의 합이 메뉴의 가격보다 크다면 예외 처리한다.
        - [ ] 메뉴에 포함된 상품들의 수량이 0 이하라면 예외 처리한다.
        - [ ] 메뉴에 포함된 상품들의 수량이 메뉴에 포함된 상품들의 수량의 합보다 크다면 예외 처리한다.
    - [ ] 등록된 메뉴들을 조회할 수 있다.
        - [ ] 존재하지 않는 식별자로 조회 시 예외 처리한다.
    - [ ] 진열 여부를 변경할 수 있다.
        - [ ] 단일 메뉴의 가격이 총합보다 큰 경우 예외 처리한다.
    - [ ] 메뉴 이름을 변경할 수 있다.
        - [ ] 메뉴 이름은 빈 값이 될 수 없다.
        - [ ] 메뉴 이름에 비속어를 사용할 수 없다.
            - [ ] 비속어 검증은 무료 비속어 필터링 사이트인 `purgomalum.com`을 이용한다.
            - [ ] HTTP API 호출을 사용해 검증한다.
    - [ ] 가격을 변경할 수 있다.
        - [ ] 가격은 0원 이상이어야 한다.
        - [ ] 가격은 메뉴에 포함된 상품별 총 금액(상품 가격 * 상품 수량)의 합보다 작아야 한다.
        - [ ] 가격이 변경될 시 전체 메뉴의 가격을 다시 계산한다.
    - [ ] 하나의 메뉴 그룹에만 속한다.
        - [ ] 어떠한 메뉴 그룹에도 속하지 않는다면 예외 처리한다.
    - [ ] 1개 이상의 상품을 포함한다.
    - [ ] 등록되지 않은 상품은 포함할 수 없다.


- **메뉴 그룹**
    - [ ] 메뉴 그룹은 전체 프로젝트에서 추적 가능한 `유일한 식별자`를 지녀야 한다.
        - [ ] 분산 환경에서 `식별자 생성의 경합이 가능한 발생하지 않도록 해야 한다.`
    - [ ] `이름`이 있다.
    - [ ] 메뉴 그룹을 등록할 수 있다.
        - [ ] 메뉴 그룹 이름은 빈 값이 될 수 없다.
    - [ ] 등록된 모든 메뉴 그룹을 조회할 수 있다.
    - [ ] 존재하지 않는 식별자로 조회 시 예외 처리한다.


- **테이블**
    - [ ] 테이블은 전체 프로젝트에서 추적 가능한 `유일한 식별자`를 지녀야 한다.
        - [ ] 분산 환경에서 `식별자 생성의 경합이 가능한 발생하지 않도록 해야 한다.`
    - [ ] `이름`, `손님 수`, `착석 여부`가 있다.
    - [ ] 테이블을 등록할 수 있다.
        - [ ] 테이블 이름은 빈 값이 될 수 없다.
        - [ ] 테이블 이름이 빈 값이라면 예외 처리한다.
    - [ ] 이름을 변경할 수 있다
        - [ ] 테이블 이름은 빈 값이 될 수 없다.
    - [ ] 테이블의 기본 상태는 0명의 손님이며 비어있다.
    - [ ] 모든 테이블을 조회할 수 있다.
    - [ ] 앉은 손님의 수를 변경할 수 있다.
        - [ ] 손님 수가 0보다 작다면 예외 처리한다.
        - [ ] 손님 수를 변경하려 할 때, 기존에 앉아있는 손님이 없었다면 예외 처리한다.
    - [ ] 착석 여부를 변경할 수 있다.
        - [ ] 착석 여부를 판단할 수 있다.
    - [ ] 손님이 앉을 수 있다.
        - [ ] 손님이 앉을 때 착석 여부를 변경한다.
    - [ ] 손님이 떠날 수 있다.
        - [ ] 손님이 떠날 때 착석 여부를 변경한다.
        - [ ] 손님이 떠날 때 테이블의 손님 수를 변경한다.
    - [ ] 주문 완료된 테이블만 정리할 수 있다.
    - [ ] 정리된 테이블은 앉아 있는 손님이 없는 상태다.


- **주문**
    - [ ] 주문은 전체 프로젝트에서 추적 가능한 `유일한 식별자`를 지녀야 한다.
        - [ ] 분산 환경에서 `식별자 생성의 경합이 가능한 발생하지 않도록 해야 한다.`
    - [ ] `주문 유형`, `주문 메뉴의 수량 및 가격`, `주문 시간`, `배달 주소`, `테이블`이 있다.
    - [ ] 주문을 등록할 수 있다.
      - [ ] 주문 유형은 필수이다.
      - [ ] 주문 유형이 빈 값이라면 예외 처리한다.
      - [ ] 주문 유형은 배달, 포장, 매장 내 식사 중 하나여야 한다.
      - [ ] 주문 유형이 매장 내 식사인 경우, 테이블 번호가 필수이다.
      - [ ] 주문 유형이 매장 내 식사인 경우, 테이블 번호가 빈 값이라면 예외 처리한다.
      - [ ] 주문 유형이 매장 내 식사인 경우, 테이블 번호가 존재하지 않는 테이블 번호라면 예외 처리한다.
      - [ ] 주문 유형이 매장 내 식사인 경우, 테이블 번호가 비어있지 않은 테이블 번호라면 예외 처리한다.
      - [ ] 주문 유형이 배달인 경우, 배달 주소가 필수이다.
      - [ ] 주문 유형이 배달인 경우, 배달 주소가 빈 값이라면 예외 처리한다.
      - [ ] 주문 유형이 포장인 경우, 배달 주소가 필수가 아니다.
      - [ ] 주문 메뉴는 필수이다.
      - [ ] 주문 메뉴가 빈 값이라면 예외 처리한다.
      - [ ] 주문 메뉴는 존재하는 메뉴여야 한다.
      - [ ] 주문 메뉴가 존재하지 않거나 진열되지 않은 메뉴라면 예외 처리한다.
      - [ ] 주문 메뉴는 메뉴의 가격과 수량을 포함한다.
      - [ ] 주문 메뉴의 가격이 빈 값이라면 예외 처리한다.
      - [ ] 주문 메뉴의 가격이 0보다 작다면 예외 처리한다.
      - [ ] 주문 메뉴의 수량이 빈 값이라면 예외 처리한다.
      - [ ] 주문 메뉴의 수량이 0보다 작다면 예외 처리한다.
      - [ ] 주문 시간은 필수이다.
      - [ ] 주문 시간이 빈 값이라면 예외 처리한다.
    - [ ] 주문 시간은 실시간으로 지정한다.
    - [ ] 주문 유형은 배달, 포장, 식당 내 식사다.
        - [ ] 배달 주문의 상태는 `대기`, `수락`, `제공 완료`, `배달 중`, `배달 완료`, `주문 완료` 순이다.
        - [ ] 배달 주문은 배달 주소가 있어야 한다.
            - [ ] 배달 주소는 255자를 넘을 수 없다.
            - [ ] 배달 주문 시 배달 주소가 비어있다면 예외 처리한다.
        - [ ] 포장 또는 식당 내 식사 주문의 상태는 대기, 수락, 제공 완료, 주문 완료 순이다.
        - [ ] 식당 내 식사는 테이블에 착석 후 가능하다.
            - [ ] 식당 내 식사를 주문할 때 테이블이 비어있지 않다면 예외 처리한다.
    - [ ] 1개 이상의 메뉴를 주문해야 한다.
        - [ ] 진열되지 않은 메뉴 주문 시 예외 처리한다.
        - [ ] 메뉴의 금액과 주문 시 요청한 금액이 다르면 예외 처리한다.
        - [ ] 지불한 금액이 주문한 메뉴의 총 금액과 일치해야 한다.
    - [ ] 주문의 기본 상태는 대기다.
    - [ ] 주문 수락
        - [ ] 대기 중인 주문만 수락할 수 있다.
        - [ ] 대기 상태가 아니라면 예외 처리한다.
        - [ ] 배달 주문은 외부 통신을 통해 배달 요청한다.
        - [ ] 배달 요청 시에 주문 식별자, 주문 총액, 배달 주소를 전달한다.
    - [ ] 제공 완료
        - [ ] 수락 상태의 주문만 음식을 제공할 수 있다.
    - [ ] 배달 중
        - [ ] 주문 유형이 배달이며 주문 상태가 제공 완료인 주문만 배달을 시작할 수 있다.
    - [ ] 배달 완료
        - [ ] 주문 상태가 배달 중인 주문만 주문 완료할 수 있다.
    - [ ] 주문 완료
        - [ ] 배달 완료된 배달 주문을 주문 완료 처리할 수 있다.
        - [ ] 제공 완료된 포장 주문 또는 식당 내 식사 주문을 주문 완료 처리할 수 있다.
    - [ ] 모든 주문을 조회할 수 있다.

---

## 용어 사전

| 한글명 | 영문명 | 설명  |
|-----|-----|-----|
|     |     |     |

## 모델링

